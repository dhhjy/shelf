<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <!--    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">-->
    <!--    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">-->
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link href="${ctxPath}/assets/expand/images/favicon.ico" rel="icon">
    <title>${clientName}</title>
    <link rel="stylesheet" href="${ctxPath}/assets/common/layui/css/layui.css"/>
    <link rel="stylesheet" href="${ctxPath}/assets/common/module/admin.css"/>
</head>
<body class="layui-layout-body" style="background: rgb(255,255,255)">


<div class="layui-row layui-layout layui-layout-admin">
    <div class="layui-header" id="layHeaderDiv" hidden>
        <button class="layui-btn layui-bg" style="height:50px;background-color: #5291dd" id="btnCallbackFun">返回</button>
    </div>

    <div class="layui-body" id="layBodyDiv">
    </div>
    <div class="layui-footer" id="layFooterDiv" style="left:0px;">
        <div class="layui-row layui-col-space15">

            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4" id="creditManager">
                <div class="layui-card" style="text-align: center;">
                    信用管理
                </div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4">
                <div class="layui-card" style="text-align: center;">
                    产品清单
                </div>
            </div>
            <div class="layui-col-xs4 layui-col-sm4 layui-col-md4" id="btnLogout">
                <div class="layui-card" style="text-align: center;">
                    退出
                </div>
            </div>
        </div>
    </div>
</div>
@/* 加入contextPath属性和session超时的配置 */
<script type="text/javascript">
    var Feng = {
        ctxPath: "",
        addCtx: function (ctx) {
            if (this.ctxPath === "") {
                this.ctxPath = ctx;
            }
        }
    };
    Feng.addCtx("${ctxPath}");

    document.oncontextmenu = function () {
        return false;
    }
</script>
<script type="text/javascript" src="${ctxPath}/assets/common/layui/layui.js"></script>
<script type="text/javascript" src="${ctxPath}/assets/common/js/common.js"></script>
<script src="${ctxPath}/assets/expand/plugins/jquery/jquery-3.2.1.min.js"></script>
<script>
    layui.use(['layer', 'element', 'admin', 'index', 'carousel'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        var index = layui.index;

        // 默认加载主页
        index.loadHome({
            menuPath: '${ctxPath}/h5/console',
            menuName: '<i class="layui-icon layui-icon-home"></i>'
        });

        toolsFun.hideHeaderFun();

        // 修改密码点击事件
        $('#setPsw').click(function () {
            layer.open({
                type: 2,
                title: "修改密码",
                closeBtn: false,
                area: 'auto',
                shade: 0.8,
                resize: false,
                btn: ['确定', '取消'],
                moveType: 1, //拖拽模式，0或者1
                content: '${ctxPath}/system/user_chpwd',
                yes: function (index) {
                    //取子页面的btn
                    var btn = layer.getChildFrame('#passwordSubmit', index);
                    btn.click();
                }
            });
        });

        /**
         * 信誉管理主页
         */
        var creditManagerFun = function () {
            // 信誉管理主页
            index.loadHome({
                menuPath: '${ctxPath}/h5/console',
                menuName: '<i class="layui-icon layui-icon-home"></i>'
            });
        };

        /**
         * 退出登陆
         */
        var logOutFun = function () {
            layer.open({
                type: 1,
                title: "退出登陆",
                closeBtn: false,
                area: '[60%,50%]',
                shade: 0.8,
                resize: false,
                btn: ['确定', '取消'],
                moveType: '1', //拖拽模式，0或者1
                content: '<div style="padding: 50px; line-height: 22px; background-color: #f2f2f2; color: #000000;">确定退出 ${clientName} ?</div>',
                success: function (layero) {
                    var btn = layero.find('.layui-layer-btn');
                    btn.find('.layui-layer-btn0').attr({
                        href: '${ctxPath}/logout'
                    });
                }
            });
        };

        /**
         * 信誉管理点击事件绑定
         */
        $("#creditManager").click(function () {
            toolsFun.hideHeaderFun();
            creditManagerFun();
        });

        /**
         * 退出事件绑定
         */
        $("#btnLogout").click(function () {
            logOutFun();
        });

        /**
         * 返回事件绑定
         */
        $("#btnCallbackFun").click(function () {
            toolsFun.hideHeaderFun();
            creditManagerFun();
        });

    });
    var toolsFun = {
        showHeaderFun: function () {
            $("#layBodyDiv").css({"margin-top": "0", "width": "100%", "clear": "both", "left": "0px"});
            $("#layHeaderDiv").show();
        },
        hideHeaderFun: function () {
            $("#layBodyDiv").css({"margin-top": "-50px", "width": "100%", "left": "0px"});
            $("#layHeaderDiv").hide();
        },
        skip: function (url) {
            toolsFun.showHeaderFun();
            // 信誉管理主页
            layui.index.loadHome({
                menuPath: url,
                menuName: '<i class="layui-icon layui-icon-home"></i>'
            });
        },
        close:function(){
            toolsFun.hideHeaderFun();
            // 信誉管理主页
            layui.index.loadHome({
                menuPath: '${ctxPath}/h5/console',
                menuName: '<i class="layui-icon layui-icon-home"></i>'
            });
        }
    };
</script>
</body>
</html>