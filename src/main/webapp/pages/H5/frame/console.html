<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>${systemName}</title>
    <link rel="stylesheet" href="${ctxPath}/assets/common/layui/css/layui.css"/>
    <link rel="stylesheet" href="${ctxPath}/assets/common/module/admin.css?v=311"/>
    <link rel="stylesheet" href="${ctxPath}/assets/expand/css/style.css" media="all"/>

    <style>
        .myIcon {
            width: 26px;
            height: 26px;
            vertical-align: middle
        }

        /** 卡片轮播图样式 */
        .admin-carousel .layui-carousel-ind {
            position: absolute;
            top: -41px;
            text-align: right;
        }

        .admin-carousel .layui-carousel-ind ul {
            background: 0 0;
        }

        .admin-carousel .layui-carousel-ind li {
            background-color: #e2e2e2;
        }

        .admin-carousel .layui-carousel-ind li.layui-this {
            background-color: #999;
        }

        /** 广告位轮播图 */
        .admin-news .layui-carousel-ind {
            height: 45px;
        }

        .admin-news a {
            display: block;
            line-height: 60px;
            text-align: center;
        }

        .layui-col-space15 > * {
            padding: 0 !important;
        }

        .layui-card-header {
            height: 60px;
            line-height: 60px;
        }
    </style>

</head>
<body>
<!-- 加载动画，移除位置在common.js中 -->
<div class="page-loading">
    <div class="rubik-loader"></div>
</div>
<!-- 正文开始 -->
<div class="layui-fluid">
    <!-- 分数统计 -->
    <div class="layui-row layui-col-space15">
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
            <div class="layui-card" style="margin:0;pading:0;">
                <div class="layui-card-header">信用管理</div>
                <div class="layui-card-body" style="height: 222px;overflow: hidden;">
                    <div id="hjxl" style="width: 100%;height: 222px;"></div>
                </div>
            </div>
        </div>

        <!--身份认证（实人认证）-->
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 idCard_">
            <div class="layui-card">
                <div class="layui-card-header">
                    <svg class="myIcon" aria-hidden="true">
                        <use xlink:href="#icon-shenfenzheng1"></use>
                    </svg>
                    身份认证
                    @if(userStatus.identityStatus == "1"){
                    <span class="layui-badge layui-bg-blue pull-right">已认证</span>
                    @}else{
                    <!--                    <span class="layui-badge layui-bg-white pull-right">去认证</span>-->
                    <span class="layui-badge layui-bg-white pull-right" style="background-color: #c0c4cc">未开通</span>
                    @}
                </div>
            </div>
        </div>

        <!-- 个人信息认证 -->
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 userInfo_">
            <div class="layui-card">
                <div class="layui-card-header">
                    <svg class="myIcon" aria-hidden="true">
                        <use xlink:href="#icon-geren2"></use>
                    </svg>
                    个人信息认证
                    @if(userStatus.userBasicStatus == "1"){
                    <span class="layui-badge layui-bg-blue pull-right">已认证</span>
                    @}else{
                    <span class="layui-badge layui-bg-white pull-right">去认证</span>
                    @}
                </div>
            </div>
        </div>

        <!-- 银行卡认证 -->
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 bankCard_">
            <div class="layui-card">
                <div class="layui-card-header">
                    <svg class="myIcon" aria-hidden="true">
                        <use xlink:href="#icon-shuaqiaqiapianyinhangqia1"></use>
                    </svg>
                    银行卡认证
                    @if(userStatus.bankInfoStatus == "1"){
                    <span class="layui-badge layui-bg-blue pull-right">已认证</span>
                    @}else{
<!--                    <span class="layui-badge layui-bg-white pull-right">去认证</span>-->
                    <span class="layui-badge layui-bg-white pull-right" style="background-color: #c0c4cc">未开通</span>
                    @}
                </div>
            </div>
        </div>

        <!-- 运营商认证 -->
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 mobile_">
            <div class="layui-card">
                <div class="layui-card-header">
                    <svg class="myIcon" aria-hidden="true">
                        <use xlink:href="#icon-shoujihaoma"></use>
                    </svg>
                    手机号认证
                    @if(userStatus.xinyanMobileStatus == "1"){
                    <span class="layui-badge layui-bg-blue pull-right">已认证</span>
                    @}else{
                    <span class="layui-badge layui-bg-white pull-right">去认证</span>
                    @}
                </div>
            </div>
        </div>

        <!-- 淘宝认证 -->
        <div class="layui-col-xs12 layui-col-sm12 layui-col-md12 taoBao_">
            <div class="layui-card">
                <div class="layui-card-header">
                    <svg class="myIcon" aria-hidden="true">
                        <use xlink:href="#icon-ic_taobaoqiyedianpu"></use>
                    </svg>
                    淘宝认证
                    @if(userStatus.xinyanTaobaoStatus == "1"){
                    <span class="layui-badge layui-bg-blue pull-right">已认证</span>
                    @}else{
                    <span class="layui-badge layui-bg-white pull-right">去认证</span>
                    @}
                </div>
            </div>
        </div>
    </div>
    <!-- 分数统计 -->
    <div class="layui-row layui-col-space15" style="padding-top: 10px;">
        <div class="layui-card">
            <button class="layui-btn layui-bg layui-btn-fluid" id="next-submit" lay-submit lay-filter="next-submit"
                    style="background-color:#2776d4;">去 借 钱
            </button>
        </div>
    </div>
</div>
@/* 加入contextPath属性和session超时的配置 */
<script type="text/javascript">
    var Feng = {
        ctxPath: "",
        addCtx: function (ctx) {
            if (this.ctxPath === "") {
                this.ctxPath = ctx;
            }
        }
    };
    Feng.addCtx("${ctxPath}");
</script>
<script type="text/javascript" src="${ctxPath}/assets/common/layui/layui.js"></script>
<script type="text/javascript" src="${ctxPath}/assets/common/js/common.js"></script>
<script type="text/javascript" src="${ctxPath}/assets/myIcon/iconfont.js"></script>
<script src="${ctxPath}/assets/common/libs/echarts/echarts.min.js"></script>
<script src="${ctxPath}/assets/common/libs/echarts/echartsTheme.js"></script>
<script>
    layui.use(['form', 'ax', 'admin', 'layer', 'index'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;

        // 用户状态
        var userStatus = ${userStatus};

        // 渲染券核效率图表
        var myCharts2 = echarts.init(document.getElementById('hjxl'), myEchartsTheme);
        var option2 = {
            backgroundColor: 'rgba(35,159,255)',
            radar: {
                splitNumber: 1,
                radius: "55%",
                //字体颜色
                name: {
                    textStyle: {color: '#fff'}
                },
                //斜角分割线颜色
                axisLine: {
                    lineStyle: {
                        color: 'rgba(255,255,255,.2)'
                    }
                },
                //雷达图中的背景色透明度
                splitArea: {
                    areaStyle: {
                        opacity: 0
                    }
                },
                //最外层边框颜色
                splitLine: {
                    lineStyle: {
                        width: 1,
                        color: 'rgba(255,255,255,.5)'
                    }
                },
                indicator: [
                    {text: '身份特质', max: 50},
                    {text: '行为偏好', max: 50},
                    {text: '人脉关系', max: 50},
                    {text: '信用历史', max: 50},
                    {text: '履约能力', max: 50}
                ]
            },

            series: [
                {
                    type: 'radar',
                    symbolSize: 0,
                    //填充区域颜色
                    areaStyle: {
                        normal: {
                            color: 'rgba(255,255,255,.3)'
                        }
                    },
                    data: [{
                        value: [48, 44, 45, 46, 46],
                        //数据边框样式
                        lineStyle: {
                            normal: {
                                width: 1,
                                color: 'rgba(82,206,228,1)'
                            }
                        }
                    }]
                }
            ]
        };
        myCharts2.setOption(option2);

        /**
         * 进行身份证(实人认证)
         */
        var idCardAuthFun = function () {
            if (userStatus.identityStatus !== '0' && userStatus.identityStatus !== 'ENABLE') {
                layer.msg("身份证已认证");
                return false;
            } else {

            }
        };

        /**
         * 进行个人信息认证
         */
        var userInfoAuthFun = function () {
            if (userStatus.userBasicStatus !== '0' && userStatus.userBasicStatus !== 'ENABLE') {
                layer.msg("个人信息已认证");
                return false;
                // } else if(userStatus.identityStatus !== "1"){
            } else if (false) {
                layer.msg("请先认证身份证信息");
                return false;
            } else {
                parent.toolsFun.skip(Feng.ctxPath + "/h5/personDetailIndex");
            }
        };

        /**
         * 进行银行卡认证
         */
        var bankCardAuthFun = function () {
            if (userStatus.bankInfoStatus !== '0' && userStatus.bankInfoStatus !== 'ENABLE') {
                layer.msg("银行卡已认证");
                return false;
            } else if (userStatus.userBasicStatus !== "1") {
                layer.msg("请先认证个人信息认证");
                return false;
            } else {
                // parent.toolsFun.skip(Feng.ctxPath + "/h5/bankCardIndex");
            }
        };

        /**
         * 进行手机验证
         */
        var mobileAuthFun = function () {
            if (userStatus.xinyanMobileStatus !== '0' && userStatus.xinyanMobileStatus !== 'ENABLE') {
                layer.msg("手机已认证");
                return false;
            } else if (userStatus.userBasicStatus !== "1") {
                layer.msg("请先认证个人信息认证");
                return false;
            } else {
                $.ajax({
                    type: 'GET',
                    url: Feng.ctxPath + "/xinYan/index/carrier/" + userStatus.userId,
                    success: function (url) {
                        parent.toolsFun.skip(url);
                    }
                });
            }
        };

        /**
         * 进行淘宝认证
         */
        var taoBaoAuthFun = function () {
            if (userStatus.xinyanTaobaoStatus !== '0' && userStatus.xinyanTaobaoStatus !== 'ENABLE') {
                layer.msg("淘宝已认证");
                return false;
            } else if (userStatus.userBasicStatus !== "1") {
                layer.msg("请先认证个人信息认证");
                return false;
            } else {
                $.ajax({
                    type: 'GET',
                    url: Feng.ctxPath + "/xinYan/index/taobaoweb/" + userStatus.userId,
                    success: function (url) {
                        parent.toolsFun.skip(url);
                    }
                });
            }
        };

        /**
         * 绑定身份证认证事件
         */
        $('.idCard_').click(function () {
            idCardAuthFun();
        });

        /**
         * 绑定个人信息认证事件
         */
        $('.userInfo_').click(function () {
            userInfoAuthFun();
        });

        /**
         * 绑定银行卡认证事件
         */
        $('.bankCard_').click(function () {
            bankCardAuthFun();
        });

        /**
         * 绑定手机号认证事件
         */
        $('.mobile_').click(function () {
            mobileAuthFun();
        });

        /**
         * 绑定淘宝认证事件
         */
        $('.taoBao_').click(function () {
            taoBaoAuthFun();
        });

        /**
         * 绑定去借钱点击事件
         */
        $("#next-submit").click(function () {
            layer.msg("您暂时不符合借贷要求");
        });
    });
</script>
</body>
</html>